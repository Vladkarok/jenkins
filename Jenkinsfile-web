pipeline {
    agent { label 'awx' }

    environment {
        db_user        = credentials('db_user')
        db_password    = credentials('db_password')
        db_name        = credentials('db_name')
        email_login    = credentials('email_login')
        email_password = credentials('email_password')
    }

    stages {
        stage('Geo WEB') {
            steps {
                ansibleTower extraVars: '''db_user: $db_user
db_password: $db_password
db_name: $db_name
email_login: $email_login
email_password: $email_password''', jobTemplate: 'Geo WEB', jobType: 'run', throwExceptionWhenFail: false, towerCredentialsId: 'awx-cred', towerLogLevel: 'full', towerServer: 'AWX'
            }
        }
    }
}

